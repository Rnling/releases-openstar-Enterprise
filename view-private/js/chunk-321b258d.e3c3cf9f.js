(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-321b258d"],{"0777":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.pageVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.pageVisible=e}}},[n("el-dialog",{attrs:{visible:t.contentVisible,width:"50%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(e){t.contentVisible=e}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"list"===t.contentTitle||"cidr"===t.contentTitle,expression:"contentTitle === 'list' || contentTitle === 'cidr' "}]},[n("div",{staticStyle:{width:"100%"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入内容"},model:{value:t.listContentValue,callback:function(e){t.listContentValue=e},expression:"listContentValue"}}),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){t.addList(t.contentTitle)}}},[t._v("添加")])],1),t._l(t.listContentArr,function(e,i){return n("div",{staticStyle:{width:"100%","margin-top":"10px"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{value:e,disabled:""}}),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",round:""},on:{click:function(e){t.removeList(t.contentTitle,i)}}},[t._v("删除")])],1)})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"dict"===t.contentTitle,expression:"contentTitle === 'dict' "}]},[n("div",{staticStyle:{width:"100%"}},[n("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入内容"},model:{value:t.dictContentValue,callback:function(e){t.dictContentValue=e},expression:"dictContentValue"}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.dictNegate,expression:"dictNegate"}],staticStyle:{width:"20%",height:"39px"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.dictNegate=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"true"}},[t._v("true")]),n("option",{attrs:{value:"false"}},[t._v("false")])]),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:""},on:{click:function(e){t.addList(t.contentTitle)}}},[t._v("添加")])],1),t._l(t.dictContentArr,function(e,i,l){return n("div",{staticStyle:{width:"100%","margin-top":"10px"}},[n("div",{staticStyle:{width:"80%",height:"40px",border:"1px solid #dcdfe6","text-align":"center","line-height":"40px",display:"inline-block"}},[t._v(t._s(i)+":"+t._s(e))]),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",round:""},on:{click:function(e){t.removeList(t.contentTitle,i)}}},[t._v("删除")])],1)})],2),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.pushContent}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.contentVisible=!1}}},[t._v("取 消")])],1)]),n("div",{staticClass:"modal-body col-sm-12"},[t._v("\r\n\t\t\t域名:"),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"www.openstar.com"},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}}),n("el-row",{staticStyle:{"margin-top":"20px"}},[n("el-table",{ref:"multipleTable",attrs:{data:t.results}},[n("el-table-column",{attrs:{label:"匹配条件",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n\t\t\t\t\t\t\t来源ip/"+t._s(e.row.condition)+"\r\n\t\t\t\t\t\t")]}}])}),n("el-table-column",{attrs:{label:"匹配符",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{slot:"prepend"},on:{change:function(n){t.selectSymbol(e.$index,e.row)}},slot:"prepend",model:{value:e.row.symbol,callback:function(n){t.$set(e.row,"symbol",n)},expression:"scope.row.symbol"}},t._l(t.realMatchTypeOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))]}}])}),n("el-table-column",{attrs:{label:"取反",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{model:{value:e.row.negate,callback:function(n){t.$set(e.row,"negate",n)},expression:"scope.row.negate"}},t._l(t.negate_options,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))]}}])}),n("el-table-column",{attrs:{label:"匹配内容","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{on:{click:function(n){t.selectContent(e.row,e.$index)}}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.row.content,callback:function(n){t.$set(e.row,"content",n)},expression:"scope.row.content"}})],1)]}}])})],1)],1),n("el-row",[n("el-col",{staticClass:"custom-col"},[t._v("\r\n\t\t\t\t\thttp头名称:"),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"x_forwarded_for/x_real_ip"},model:{value:t.realipfrom,callback:function(e){t.realipfrom=e},expression:"realipfrom"}}),n("div",{staticStyle:{"margin-top":"20px"}},[n("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v('该规则是配置有使用CDN或者其他中转反向代理的域名，默认情况下，CDN或者其他代理会把用户真实IP放在x_forwarded_for或者x_real_ip中，故http头名称则设置为：x_forword_for（"-"需要换成"_"）。部分CDN放在一个自定义字段中，需要和其确定在那个字段（"-"需要换成"_"）。\r\n\t\t\t\t\t')])],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.pageVisible=!1}}},[t._v("取 消")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加"===t.title,expression:"title === '添加' "}],attrs:{type:"primary"},on:{click:t.addData}},[t._v("添加")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"编辑"===t.title,expression:"title === '编辑' "}],attrs:{type:"primary"},on:{click:t.addData}},[t._v("编辑")])],1)],1)},l=[],a=(n("ac6a"),n("456d"),function(){return n.e("chunk-24bbae2e").then(n.bind(null,"0882"))}),o={data:function(){return{title:"",pageVisible:!1,host:"",realipfrom:"",results:[],contentTitle:"",contentVisible:!1,contentIndex:0,listContentValue:"",listContentArr:[],dictContentValue:"",dictNegate:!0,dictContentArr:{},negate_options:[{value:!1,label:"false"},{value:!0,label:"true"}],symbol_options:[{value:"reg",label:"正则"},{value:"in",label:"包含"},{value:"list",label:"数组"},{value:"in_list",label:"包含列表"},{value:"start_list",label:"开头列表"},{value:"end_list",label:"结尾列表"},{value:"dict",label:"字典"},{value:"",label:"等于"},{value:"rein_list",label:"包含扩展列表"},{value:"len",label:"长度"},{value:"@token@",label:"token"}],jioContent:[{label:"大小写敏感 i",name:"i",index:0},{label:"启用JIT编译 j",name:"j",index:1},{label:"缓存 o",name:"o",index:2},{label:"单行模式 s",name:"s",index:3},{label:"锚定模式 a",name:"a",index:4},{label:"DFA模式 d",name:"d",index:5},{label:"扩展模式 x",name:"x",index:6},{label:"允许重复命名子模式 D",name:"D",index:7},{label:"启用Javescript兼容模式 J",name:"J",index:8},{label:"UTF-8模式 u * 需要PCRE库加上--enable-utf8",name:"u",index:9},{label:"UTF-8模式 U  * 同u模式，但不进行字符串有效性检查",name:"U",index:10}],realMatchTypeOptions:[{value:"cidr",label:"ip段(cidr)"},{value:"list",label:"数组(list)500个IP内使用"},{value:"dict",label:"字典(dict)超过500个IP使用"},{value:"",label:"等于(单个中转ip使用)"}]}},created:function(){},methods:{addData:function(){this.$emit("diagAdd",this.title)},addList:function(t){switch(t){case"dict":!0===this.dictNegate||"true"===this.dictNegate?this.$set(this.dictContentArr,this.dictContentValue,!0):this.$set(this.dictContentArr,this.dictContentValue,!1);break;default:this.listContentArr.push(this.listContentValue);break}},removeList:function(t,e){switch(t){case"dict":this.$delete(this.dictContentArr,e);break;default:this.listContentArr.splice(e,1);break}},selectSymbol:function(t){this.results[0]["content"]="",this.listContentValue="",this.listContentArr=[],this.dictContentValue="",this.dictContentArr={}},selectContent:function(t,e){var n=String(t.symbol);switch(n){case"":this.contentTitle=n,this.contentVisible=!1;break;case"dict":this.contentTitle=n,Object.keys(t["content"]).length>0?this.dictContentArr=JSON.parse(t["content"]):this.dictContentArr={},this.contentVisible=!0;break;default:this.contentTitle=n,t["content"].length>0?this.listContentArr=JSON.parse(t["content"]):this.listContentArr=[],this.contentVisible=!0;break}},pushContent:function(){var t=String(this.results[0]["symbol"]);switch(t){case"dict":this.results[0]["content"]=JSON.stringify(this.dictContentArr);break;default:this.results[0]["content"]=JSON.stringify(this.listContentArr);break}this.contentVisible=!1},cancelContent:function(){this.contentVisible=!1}},components:{WafDivider:a},watch:{$route:function(t,e){}}},s=o,r=n("2877"),c=Object(r["a"])(s,i,l,!1,null,"5e88b798",null);e["default"]=c.exports},"456d":function(t,e,n){var i=n("4bf8"),l=n("0d58");n("5eda")("keys",function(){return function(t){return l(i(t))}})},"5eda":function(t,e,n){var i=n("5ca1"),l=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(l.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},ac6a:function(t,e,n){for(var i=n("cadf"),l=n("0d58"),a=n("2aba"),o=n("7726"),s=n("32e9"),r=n("84f2"),c=n("2b4c"),u=c("iterator"),d=c("toStringTag"),p=r.Array,b={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=l(b),f=0;f<h.length;f++){var v,m=h[f],w=b[m],y=o[m],g=y&&y.prototype;if(g&&(g[u]||s(g,u,p),g[d]||s(g,d,m),r[m]=p,w))for(v in i)g[v]||a(g,v,i[v],!0)}}}]);